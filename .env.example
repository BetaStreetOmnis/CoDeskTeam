# 选择模型提供方：openai | codex | mock | opencode | nanobot | pi
JETLINKS_AI_PROVIDER=openai

# OpenAI
OPENAI_API_KEY=
# OpenAI 兼容网关（如 tabcode）：可用 https://api.tabcode.cc/openai（会自动补全 /v1）
OPENAI_BASE_URL=https://api.openai.com/v1
JETLINKS_AI_MODEL=gpt-5.2

# 对外访问基址（用于生成绝对下载链接；企业微信等外部渠道建议配置）
# 例：https://jetlinks-ai.your-company.com
# JETLINKS_AI_PUBLIC_BASE_URL=

# 工作区（默认：启动时的 cwd）
# JETLINKS_AI_WORKSPACE=/path/to/workspace

# 团队项目/工作区白名单根目录（逗号分隔）
# - 在页面里新增“项目/工作区”时，path 必须位于这些目录下
# - 默认：等于 JETLINKS_AI_WORKSPACE
# JETLINKS_AI_PROJECTS_ROOT=/path/to/code,/path/to/other

# 飞书预配置（可选，便于新团队一键导入）
# - 在“项目/工作区管理 -> 飞书 Webhook”点击“导入预配置”
# - webhook_url 为空则视为未配置
# JETLINKS_AI_FEISHU_PRESET_NAME=团队飞书机器人
# JETLINKS_AI_FEISHU_PRESET_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/xxxx
# JETLINKS_AI_FEISHU_PRESET_VERIFICATION_TOKEN=
# JETLINKS_AI_FEISHU_PRESET_ENABLED=1

# 工具开关（默认更安全：关闭 shell / 写文件）
JETLINKS_AI_ENABLE_SHELL=0
JETLINKS_AI_ENABLE_WRITE=0
JETLINKS_AI_ENABLE_BROWSER=0

# 工作区隔离（shared=共享；per_user=每人独立子目录）
# JETLINKS_AI_WORKSPACE_LAYOUT=shared
# JETLINKS_AI_WORKSPACE_USER_DIR=users

# 全局管理员（逗号分隔邮箱，可查看并切换所有团队）
# JETLINKS_AI_SUPER_EMAILS=admin@example.com,ops@example.com

# 会话/资源上限（多租户/防滥用）
# - session_id 会绑定当前 user/team，且会自动过期（TTL）。
JETLINKS_AI_SESSION_TTL_MINUTES=120
JETLINKS_AI_MAX_SESSIONS=200
JETLINKS_AI_MAX_SESSION_MESSAGES=120
# 对话上下文上限（按字符数做近似裁剪，避免超出模型上下文窗口）
# JETLINKS_AI_MAX_CONTEXT_CHARS=120000

# 输出目录清理（按文件修改时间；仅清理由系统生成的 uuid 文件）
JETLINKS_AI_OUTPUTS_TTL_HOURS=168

# 浏览器资源限制（Playwright）
JETLINKS_AI_MAX_BROWSER_PAGES=8
JETLINKS_AI_BROWSER_PAGE_TTL_MINUTES=30

# Codex CLI（作为底层智能体，可选）
# 安装参考：https://github.com/openai/codex
# 然后把 provider 切到 codex（前端下拉或直接改这里）
# JETLINKS_AI_PROVIDER=codex
# JETLINKS_AI_CODEX_CMD=codex
# JETLINKS_AI_CODEX_TIMEOUT_SECONDS=300
# JETLINKS_AI_CODEX_REASONING_EFFORT=medium
# JETLINKS_AI_CODEX_ALLOW_DANGEROUS=0

# OpenCode（作为底层智能体，可选）
# 先启动：opencode serve --hostname 127.0.0.1 --port 4096
# 然后把 provider 切到 opencode（前端下拉或直接改这里）
# JETLINKS_AI_PROVIDER=opencode
JETLINKS_AI_OPENCODE_BASE_URL=http://127.0.0.1:4096
# JETLINKS_AI_OPENCODE_USERNAME=opencode
# JETLINKS_AI_OPENCODE_PASSWORD=
# JETLINKS_AI_OPENCODE_TIMEOUT_SECONDS=300

# NanoBot（作为底层智能体，可选）
# 安装：pip install nanobot-ai
# 然后把 provider 切到 nanobot（前端下拉或直接改这里）
# JETLINKS_AI_PROVIDER=nanobot
# JETLINKS_AI_NANOBOT_CMD=nanobot
# JETLINKS_AI_NANOBOT_HOME=<repo>/.jetlinks-ai/nanobot-home
# JETLINKS_AI_NANOBOT_TIMEOUT_SECONDS=300

# Pi（pi-mono，作为底层智能体，可选）
# - 需要拉取子模块：git submodule update --init --recursive
# - 启用：JETLINKS_AI_ENABLE_PI=1，然后把 provider 切到 pi（前端下拉或直接改这里）
# JETLINKS_AI_PROVIDER=pi
# JETLINKS_AI_ENABLE_PI=0
# JETLINKS_AI_PI_BACKEND=auto   # auto|local|docker（docker 需要宿主机装 docker）
# JETLINKS_AI_PI_DOCKER_IMAGE=node:20
# JETLINKS_AI_PI_TIMEOUT_SECONDS=300
# JETLINKS_AI_PI_MONO_DIR=<repo>/third_party/pi-mono
# JETLINKS_AI_PI_ENABLE_TOOLS=0

# 数据 / 鉴权（可选）
# JETLINKS_AI_DATA_DIR=<repo>/.jetlinks-ai
# JETLINKS_AI_DB_PATH=<repo>/.jetlinks-ai/jetlinks_ai.db
# JETLINKS_AI_DB_URL=postgresql://user:pass@127.0.0.1:5432/jetlinks_ai
# JETLINKS_AI_JWT_SECRET=（不设置会自动生成并写入 .jetlinks-ai/jwt_secret）
# JETLINKS_AI_JWT_EXP_MINUTES=10080

# 共享邀请码（内部使用，可多次注册）
# - 适合内网/小团队快速拉新；任何知道 token 的人都能注册，请勿暴露到公网。
# - 如果设置了 TEAM_ID/TEAM_NAME，则 token 只能注册到指定团队；否则按注册时选择的团队加入。
# - 不设置 TOKEN 时，默认会在启动时自动生成并写入：<JETLINKS_AI_DATA_DIR>/shared_invite_token（可用 JETLINKS_AI_SHARED_INVITE_AUTO=0 关闭自动生成）
# JETLINKS_AI_SHARED_INVITE_TOKEN=
# JETLINKS_AI_SHARED_INVITE_AUTO=1
# JETLINKS_AI_SHARED_INVITE_TEAM_ID=
# JETLINKS_AI_SHARED_INVITE_TEAM_NAME=
# JETLINKS_AI_SHARED_INVITE_ROLE=member   # member|admin（admin 需要同时设置 JETLINKS_AI_SHARED_INVITE_ALLOW_ADMIN=1）
# JETLINKS_AI_SHARED_INVITE_ALLOW_ADMIN=0

# Gateway
JETLINKS_AI_PORT=18790

# API (FastAPI) 输出目录（默认：<repo>/.jetlinks-ai/outputs）
# JETLINKS_AI_OUTPUTS_DIR=/path/to/outputs
